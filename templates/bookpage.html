{% extends "layout.html" %}

{% block title %} {{title}} by {{author}} {% endblock %}


{% block body %}
  <main>
    <section class="bookInfo">
      <h2> {{title}} </h2>
      <p> by {{author}}</p>
      <p> Publication year: {{publicationYear}}</p>
      <p>isbn: {{isbn}}</p>

      {% if isFavBook %}
        <form action="{{ url_for('remove_book', id=id) }}">
            <button type="submit" class="btn btn-primary" > Remove from your book list </button>
        </form>
      {% else %}
        <form action="{{ url_for('add_book', id=id) }}">
            <button type="submit" class="btn btn-primary" > add to your list of books </button>
        </form>
      {% endif %}

    </section>

    <section class="ratings">
    <br>

    </section>

    <h2> Reviews and ratings </h2>
    <section class="reviews">

      {% if canSubmitReview %}

        <form action="{{ url_for('submit_review') }}" method="post">

          <div class="form-group">
            <label for="exampleFormControlSelect1">Rate this book from scale of 1 to 5 </label>
            <select class="form-control" id="exampleFormControlSelect1" name="rating" style="width:90%">
              <option value="1"> 1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>

          <p> What did you think? </p>
          <textarea class="form-control" name="review" placeholder="Write your review" value=""style="width:90%">
          </textarea>
          <button type="submit" class="btn btn-primary"> Submit review</button>
        </form>

      {% else %}


        {% for data in userReview %}
          <div class="review">
            <h4> Your review </h4>
            <p> You rated it {{data.stars}}/5</p>
            <hr>
            <p>  {{data.content}} </p>
            <hr>
          </div>
        {% endfor %}

      {% endif %}

      <br>
      <h4> Others users reviews</h4>
      {% if reviews %}
      <table class="table table-striped">
        {% for review in reviews %}
            <tr>
              <td>
                  <b>{{review.username}} </b>rated it {{review.stars}}/5
              </td>

              <td>
                  {{review.content}}
              </td>
            </tr>
        {% endfor %}
      </table>

      {% else %}
          No other reviews
      {% endif %}


    </section>
    <br>

    <section>
        <h4> Rating on  GoodReads.com </h4>
        <table class="table table-striped">

          {% for data in json %}
              <tr>
                <td> Numbers of ratings</td>
                <td>  {{data.work_ratings_count}} </td>

              </tr>

              <tr>
                <td> Average ratings</td>
                <td> {{data.average_rating}}</td>

              </tr>
          {% endfor %}
        </table>
    </section>
  </main>


{% endblock %}
